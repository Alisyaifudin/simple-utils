var m=(o,n,t)=>new Promise((i,r)=>{var e=a=>{try{s(t.next(a))}catch(c){r(c)}},u=a=>{try{s(t.throw(a))}catch(c){r(c)}},s=a=>a.done?i(a.value):Promise.resolve(a.value).then(e,u);s((t=t.apply(o,n)).next())});import{elem$ as B}from"./share/elem$.js";import{getElement as D}from"./share/element.js";import{state$ as _}from"./share/state$.js";import{PDFDocument as y}from"./share/pdfjs.js";import{err as v,ok as I}from"./share/utils.js";var P=class{constructor(n){this.file=n;this._document=null;this.document()}document(){return m(this,null,function*(){if(this._document)return this._document;let n=yield this.file.arrayBuffer(),t=yield y.load(n);return this._document=t,t})}count(){return m(this,null,function*(){return(yield this.document()).getPageCount()})}split(n){return m(this,null,function*(){let[t,i]=n,r=yield this.document(),e=r.getPageCount();if(t<1||t>e||t>=i)return v(`Invalid page range: ${t}-${i}. PDF has ${e} pages.`);let u=yield y.create(),s=Array.from({length:i-t}).map((p,f)=>t-1+f);(yield u.copyPages(r,s)).forEach(p=>u.addPage(p));let c=yield u.save(),g=new Blob([c],{type:"application/pdf"});return I(g)})}};function L(o,n){return function(){return m(this,null,function*(){let t=o.files;if(t===null||t.length===0){n.set=null;return}let i=t[0],r=new P(i);n.set=r})}}function $(o,n){n.addEffect(t=>m(null,null,function*(){if(t===null)return;if(t.file.type!=="application/pdf"){o.set(r=>(r.textContent="Please select a valid PDF file.",r.className="text-red-500",r));return}try{o.set(e=>(e.textContent="Reading PDF...",e.className="",e));let r=yield t.count();o.set(e=>(e.textContent=`PDF has ${r} page${r!==1?"s":""}`,e.className="",e))}catch(r){console.error("PDF processing error:",r),o.set(e=>(e.textContent="Error reading PDF. File may be corrupted or encrypted.",e.className="text-red-500",e))}}))}import{getElement as N}from"./share/element.js";import{err as l,ok as R}from"./share/utils.js";function x(o,n){let t=[],i=o.split(",");for(let r of i){let e=Number(r);if(!isNaN(e)){if(!Number.isInteger(e))return l("Must be integer");if(e<1)return l("Must be greater than 0");if(e>n)return l("Cannot greater than the total page");t.push([e,e+1]);continue}let u=r.split("-");if(u.length!==2)return l("Invalid input");let[s,a]=u.map(Number);if(isNaN(s)||isNaN(a))return l("Not a number");if(a<=s)return l("Second number must be greater");if(s>n)return l("Cannot greater than the total page");if(!Number.isInteger(s)||!Number.isInteger(a))return l("Must be integer");let c=a>n?n+1:a;t.push([s,c])}return R(t)}function w(o,n){let t=N("#pdf-status");return function(i){return m(this,null,function*(){if(i.preventDefault(),n.get===null)return;let e=new FormData(o).get("pages"),u=yield n.get.count();if(!U(e))return;let[s,a]=x(e,u);if(s!==null){t.textContent=s;return}t.textContent="";let c=N("#results");c.innerHTML="";let g=n.get.file.name.split("."),p=g.slice(0,g.length-1);for(let[f,b]of a){let[d,h]=k(c);d.textContent="Loading...",n.get.split([f,b]).then(([F,H])=>{if(F!==null){d.textContent=F;return}let S=URL.createObjectURL(H);h.href=S;let T=b===f+1?`${p}-${f}.pdf`:`${p}-${f}-${b-1}.pdf`;h.download=h.textContent=T,d.innerHTML="",d.appendChild(h)})}})}}function U(o){return typeof o=="string"}function k(o){let n=document.createElement("li"),t=document.createElement("a");return o.appendChild(n),[n,t]}var C=D("#pdf-input"),E=_(null),j=B(D("#pdf-page")),M=D("form");C.addEventListener("change",L(C,E));$(j,E);M.addEventListener("submit",w(M,E));
